{% extends "base.html" %} {% block title %}AquaSensor{% endblock %}
{% block contentHead %}
<script>
  async function _isLogged() {
    let tok = window.sessionStorage["AquaSensorToken"];
    return await fetch("{{ base_url }}" + "/api/v1/auth/me", {
      headers: {
        Accept: "application/json",
        "AquaSensor-Login-Token": tok,
      },
    })
      .then((response) => response.json())
      .then((response) => {
        return "email" in response;
      });
  }
</script>

<style>
.main p{
      font-size: 20px;
      width: 200px;
      height: auto;
}

#datalist div{
	margin-left: 3vw;
	border:1px solid black;
}
@media screen and (min-width:480px){
	#datalist div{
		display:flex;
		min-width:45vw;
		min-height:400vw;
	}
}
@media screen and (min-width:801px){
	#datalist div{
		display:flex;
		min-width:16vw;
		min-height:16vw;
		float: left;
	}
}
#datalist div p{
	word-wrap: break-word;
	max-width: 14vw;
	line-height: 1.3;
}
#here {
  font-family: Arial, sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

#here h3 {
  color: #333;
  font-size: 24px;
  margin-bottom: 20px;
  border-bottom: 2px solid #eee;
  padding-bottom: 10px;
}

#datalist {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 30px;
}

#datalist > div {
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 20px;
  transition: transform 0.3s ease;
}

#datalist > div:hover {
  transform: translateY(-5px);
}

#datalist h4 {
  color: #2c3e50;
  font-size: 18px;
  margin-bottom: 10px;
}

#datalist h4 a {
  color: inherit;
  text-decoration: none;
}

#datalist h4 a:hover {
  color: #3498db;
  text-decoration: underline;
}

#datalist p {
  color: #666;
  line-height: 1.5;
  margin-bottom: 15px;
}

#datalist img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin-top: 10px;
}

#here a {
  display: inline-block;
  margin-right: 15px;
  color: #3498db;
  text-decoration: none;
  padding: 8px 15px;
  border: 1px solid #3498db;
  border-radius: 4px;
}

#here a:hover {
  background-color: #3498db;
  color: white;
}
</style>

{% endblock %}

{% block content %}
<div id="main">
  <div id="content">
    <p>
    The AquaSensor solution provides low cost, real-time river quality
    monitoring, which ensures legal compliance, saves money and protects the
    environment.
  </p>
  <div id="here"></div>
  </div>
  
  <script>
    _isLogged().then((value) => {
      var writeto = document.getElementById("here");
      if (value) {
	      writeto.innerHTML=
"<h3>Data Correlation Tools:</h3><span id=\"datalist\"><div id=\"first\"></div><div id=\"second\"></div><div id=\"third\"></div></span>";
	      document.getElementById('first').innerHTML=
"<h4><a href=\"{{ base_url }}/studio\">Sensor map</a></h4><p>An interactive map which allows an easy overview of the sensor readings</p><img src=\"static/screenshots/studio.webp\" alt=\"A picture of map with a river section highlighted, the highlight is a gradient over shades of blue\"></img>";
	      document.getElementById('second').innerHTML=
"<h4><a href=\"\">TBD</a></h4>"
	      document.getElementById('third').innerHTML=
"<h4><a href=\"\">TBD</a></h4>"
      } else {
        writeto.innerHTML =
          "<a href='{{ base_url }}/login'><p>Sign in</p></a><a href='{{ base_url }}/register'><p>Register</p></a>";
      }
    });
  </script>
</div>
{% endblock %}
